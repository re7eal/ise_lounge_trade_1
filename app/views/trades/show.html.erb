<div ng-controller="TradeController" ng-init="loadTradeMessages()">
	<p id="notice"><%= notice %></p>
	<div class="row-fluid">
		<div class="span6">
			<div class="well">
				<div class="row-fluid">
					<div class="span10">
						<div class="media">
							<a class="pull-left" href="#"> <img class="media-object"
								src="custom/images/profile-1-pic-64.jpg">
							</a>
							<div class="media-body">
								<h4 class="media-heading">
									<%= link_to @trade.user.name, @trade.user %> wants to trade
								</h4>
								<p><%= @trade.note %></p>
							</div>
						</div>
					</div>
					<div class="span2">
						<div style="text-align: right">Trade #<%= @trade.id %></div>
					</div>
				</div>
				<div class="row-fluid mbm">
					<div class="span12">
						<%= @trade.created_at %>
						<div class="pull-right">
							<% if current_user == @trade.user %>
							<%= link_to 'Edit trade', edit_trade_path(@trade), :class => 'btn btn-small btn-primary' %>
							<% end %>
							<a href="#" class="btn btn-small btn-primary mlm">Mark as finished</a>
						</div>
					</div>
				</div>
				<div class="row-fluid">
					<div class="span6">
						<div class="popover topic-box">
							<h3 class="popover-title topic-box-title">Have</h3>
							<div class="popover-content">
								<% @trade.have_courses.each do |have_course| %>
								<p><%= have_course.course_number %> <%= have_course.course_name %> (<%= have_course.course_section %>)</p>
								<% end %>
							</div>
						</div>
					</div>
					<div class="span6">
						<div class="popover topic-box">
							<h3 class="popover-title topic-box-title">Want</h3>
							<div class="popover-content">
								<% @trade.want_courses.each do |want_courses| %>
								<p><%= want_courses.course_number %> <%= want_courses.course_name %> (<%= want_courses.course_section %>)</p>
								<% end %>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="span6">

			<h3 class="mbl">Messages</h3>

			<div ng-repeat="tradeMessage in tradeMessages">

				<div class="well">
					<div class="media">
						<a class="pull-left" href="#"> <img class="media-object"
							src="custom/images/profile-2-pic-64.jpg">
						</a>
						<div class="media-body">
							<h4 class="media-heading">
								<a href="/users/{{tradeMessage.user_id}}">{{tradeMessage.username}}</a>
							</h4>
							{{tradeMessage.created_at}}
							<p>{{tradeMessage.content}}</p>
						</div>
					</div>
				</div>

			</div>

			<div class="well post-message-box">
				<textarea class="span6" rows="2" placeholder="Write a message..." ng-model="message"></textarea>
				<button class="btn btn-small btn-primary pull-right"
				style="padding: 4px" ng-click="postTrade()">Post</button>
			</div>

		</div>
	</div>
</div>
